<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AETHER | Shikhar Pandey Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

    <style>
        :root { --neon: #00ffcc; --bg: #050505; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: var(--bg); font-family: 'Syncopate', sans-serif; }
        
        /* 3D Landing Page Overlay */
        #loader {
            position: fixed; inset: 0; background: #000; z-index: 1000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: transform 1s cubic-bezier(0.8, 0, 0.2, 1), opacity 1s;
        }
        .title-container { text-align: center; z-index: 10; }
        .title { color: white; font-size: clamp(2rem, 8vw, 4rem); font-weight: 700; letter-spacing: 20px; margin: 0; }
        #timer-text { color: var(--neon); font-size: 0.8rem; margin-top: 20px; letter-spacing: 3px; opacity: 0.8; }
        
        /* Progress Ring */
        .ring { width: 60px; height: 60px; border: 2px solid rgba(255,255,255,0.1); border-top: 2px solid var(--neon); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* HUD elements */
        .hud { position: absolute; padding: 30px; color: var(--neon); pointer-events: none; z-index: 5; width: 100%; box-sizing: border-box; display: flex; justify-content: space-between; top: 0; }
        .hud-msg { font-size: 0.6rem; text-transform: uppercase; letter-spacing: 2px; }
        #video-hud { position: absolute; bottom: 20px; right: 20px; width: 150px; height: 110px; border: 1px solid var(--neon); border-radius: 4px; opacity: 0.3; transform: scaleX(-1); }
    </style>
</head>
<body>

    <div id="loader">
        <div class="ring"></div>
        <div class="title-container">
            <h1 class="title">AETHER</h1>
            <div id="timer-text">INITIALIZING CORE IN 3s...</div>
        </div>
    </div>

    <div class="hud">
        <div class="hud-msg">System: <span id="status">Standby</span><br>Mode: <span id="mode">Saturn</span></div>
        <div class="hud-msg" style="text-align: right;">Shikhar Pandey // Engine v2.5<br>30,000 Particles Active</div>
    </div>

    <video id="video-hud" autoplay playsinline></video>

    <script>
        let scene, camera, renderer, points, geometry;
        let positions, targetPos, velocities;
        let hX = 0, hY = 0, mouseX = 0, mouseY = 0;
        let isExploding = false;
        const P_COUNT = 30000;

        // --- AUTOMATED TRANSITION ---
        let countdown = 3;
        const timerElement = document.getElementById('timer-text');
        
        const countdownInterval = setInterval(() => {
            countdown--;
            timerElement.innerText = `INITIALIZING CORE IN ${countdown}s...`;
            if(countdown <= 0) {
                clearInterval(countdownInterval);
                startEngine();
            }
        }, 1000);

        function startEngine() {
            const loader = document.getElementById('loader');
            loader.style.opacity = '0';
            loader.style.transform = 'scale(1.2)';
            setTimeout(() => loader.remove(), 1000);
            
            initThree();
            setupCamera();
            animate();
        }

        // --- THREE.JS ENGINE ---
        function initThree() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 10;

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement);

            geometry = new THREE.BufferGeometry();
            positions = new Float32Array(P_COUNT * 3);
            targetPos = new Float32Array(P_COUNT * 3);
            velocities = new Float32Array(P_COUNT * 3);

            // High-quality glowing particle texture
            const canvas = document.createElement('canvas');
            canvas.width = 64; canvas.height = 64;
            const ctx = canvas.getContext('2d');
            const grad = ctx.createRadialGradient(32,32,0,32,32,32);
            grad.addColorStop(0, 'white');
            grad.addColorStop(0.4, 'rgba(0,255,204,0.3)');
            grad.addColorStop(1, 'black');
            ctx.fillStyle = grad;
            ctx.fillRect(0,0,64,64);
            
            const material = new THREE.PointsMaterial({
                size: 0.08,
                map: new THREE.CanvasTexture(canvas),
                transparent: true,
                blending: THREE.AdditiveBlending,
                depthWrite: false
            });

            for(let i=0; i<P_COUNT*3; i++) positions[i] = (Math.random()-0.5)*20;
            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            points = new THREE.Points(geometry, material);
            scene.add(points);
            setShape('saturn');
        }

        function setShape(type) {
            for (let i = 0; i < P_COUNT; i++) {
                let x, y, z;
                const t = Math.random() * Math.PI * 2;
                if (type === 'saturn') {
                    if(Math.random() > 0.4) {
                        const r = 4 + Math.random();
                        x = r * Math.cos(t); y = r * Math.sin(t)*0.2; z = r * Math.sin(t);
                    } else {
                        const p = Math.random()*Math.PI;
                        x = Math.sin(t)*Math.cos(p)*1.8; y = Math.sin(t)*Math.sin(p)*1.8; z = Math.cos(t)*1.8;
                    }
                }
                targetPos[i*3] = x; targetPos[i*3+1] = y; targetPos[i*3+2] = z;
            }
        }

        // --- CAMERA & MOUSE LOGIC ---
        function setupCamera() {
            const video = document.getElementById('video-hud');
            const hands = new Hands({locateFile: (file) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${file}`});
            hands.setOptions({ maxNumHands: 1, minDetectionConfidence: 0.5 });

            hands.onResults(res => {
                if (res.multiHandLandmarks && res.multiHandLandmarks[0]) {
                    const lm = res.multiHandLandmarks[0];
                    hX = (lm[9].x - 0.5) * -20;
                    hY = (lm[9].y - 0.5) * -15;
                    document.getElementById('status').innerText = "Camera Active";
                }
            });

            const cam = new Camera(video, {
                onFrame: async () => await hands.send({image: video}),
                width: 640, height: 480
            });
            cam.start().catch(() => {
                document.getElementById('status').innerText = "Mouse Control (Camera Off)";
                window.addEventListener('mousemove', (e) => {
                    hX = (e.clientX / window.innerWidth - 0.5) * 20;
                    hY = -(e.clientY / window.innerHeight - 0.5) * 15;
                });
            });
        }

        function animate() {
            requestAnimationFrame(animate);
            const p = geometry.attributes.position.array;
            for (let i = 0; i < P_COUNT; i++) {
                const i3 = i * 3;
                p[i3] += (targetPos[i3] + hX - p[i3]) * 0.05;
                p[i3+1] += (targetPos[i3+1] + hY - p[i3+1]) * 0.05;
                p[i3+2] += (targetPos[i3+2] - p[i3+2]) * 0.05;
            }
            geometry.attributes.position.needsUpdate = true;
            points.rotation.y += 0.001;
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
